<!DOCTYPE html>
<html>
<head>
	<title>ACS Test</title>

	<link href="styles/kendo.mobile.all.min.css" rel="stylesheet" type="text/css" />
	<link href="styles/app.min.css" rel="stylesheet" type="text/css" />
	
	<script src="js/jquery-1.7.1.min.js" type="text/javascript"></script>
	<script src="js/underscore-min.js" type="text/javascript"></script>
	<script src="js/jquery.base64.min.js" type="text/javascript"></script>
	<script src="js/kendo.mobile.min.js" type="text/javascript"></script>
	<script src="js/amplify.min.js" type="text/javascript"></script>	
    <script src="scripts/acs.js" type="text/javascript"></script>	
</head>
<body>
    <script type="text/x-kendo-template" id="idpListTemplate">		
        <img src="${imageUrl}" style="border: 0px; height: 20px" />
        
        <button type="button" onclick="javascript:window.location.href='${loginUrl}'">${name}</button>
	</script>
	<!-- <a data-bind="click: redirectToIdp">${name}</a> -->

    <div id="startPage" data-role="view" data-title="ACS Test" data-model="acsViewModel">
		<header data-role="header">
			<div data-role="navbar">
				<span data-role="view-title"></span>				
			</div>
		</header>
		
		<br />
		<h2>Identity Providers</h2>
		
        <ul id="idps" data-role="listview" data-bind="source: idpsSource" data-template="idpListTemplate" data-style="inset">
		</ul>

		<footer data-role="footer">
			<div data-role="tabstrip">
                <a data-icon="home" href="#startPage">Home</a>
			</div>
		</footer>
	</div>
    <script type="text/javascript">
    window.external =
    {
        'Notify': function(s) { document.location = 'acs://settoken?token=' + s; },
        'notify': function(s) { document.location = 'acs://settoken?token=' + s; }
    };
    </script>
    <script>
        $(function () {
            window.kendoMobileApplication = new kendo.mobile.Application(document.body);
         
            acsViewModel.getIdps();
        });
    </script>
</body>
</html>
