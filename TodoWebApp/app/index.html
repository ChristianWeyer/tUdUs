<!DOCTYPE html>
<!--<html manifest="cache.manifest">-->
<html>
<head>
	<title>TODOs</title>

	<meta charset="utf-8">
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0" />
	
	<link rel="apple-touch-icon" href="images/Wooden_Todo_128x128.png" />
	<link rel="apple-touch-startup-image" href="images/splash.png" media="screen and (max-device-width: 320px)" />
	
	<link href="styles/kendo.mobile.all.min.css" rel="stylesheet" type="text/css" />
	<link href="styles/app.min.css" rel="stylesheet" type="text/css" />
	
	<script src="js/jquery-1.7.1.min.js" type="text/javascript"></script>
	<script src="js/underscore-min.js" type="text/javascript"></script>
	<script src="js/jquery.base64.min.js" type="text/javascript"></script>
	<script src="js/kendo.mobile.min.js" type="text/javascript"></script>
	<script src="js/amplify.min.js" type="text/javascript"></script>
	<script src="js/notifier.min.js" type="text/javascript"></script>
	<script src="js/jquery.signalR-0.5.3.min.js" type="text/javascript"></script>
    <script src="js/jquery.ba-bbq.min.js" type="text/javascript"></script>
	<script src="js/signalr.hubs.min.js" type="text/javascript"></script>
	
    <script src="cordova.js" type="text/javascript"></script>
    <script src="childbrowser.js" type="text/javascript"></script>

	<script src="Scripts/app.js" type="text/javascript"></script>
    <script src="Scripts/constants.js" type="text/javascript"></script>
    <script src="Scripts/startViewModel.js" type="text/javascript"></script>
	<script src="Scripts/views.js" type="text/javascript"></script>	
	<script src="Scripts/notifications.js" type="text/javascript"></script>
	<script src="Scripts/remoteservices.js" type="text/javascript"></script>
	<script src="Scripts/authenticationViewModel.js" type="text/javascript"></script>
	<script src="Scripts/todosViewModel.js" type="text/javascript"></script>
	<script src="Scripts/newTodoItemViewModel.js" type="text/javascript"></script>	
	<script src="Scripts/errorViewModel.js" type="text/javascript"></script>
    <script src="Scripts/acsViewModel.js" type="text/javascript"></script>
    <script src="Scripts/settingsViewModel.js" type="text/javascript"></script>
</head>
<body>
	<!-- Templates -->
	<script type="text/x-kendo-template" id="tasksListTemplate">
		<a data-align="left" data-bind="events:{touchend: navigateTodoDetails}">${title}</a>
		<a data-role="detailbutton" data-style="rowdelete" data-bind="events:{click: removeTodo}"></a>
	</script>
	<script type="text/x-kendo-template" id="idpListTemplate">
        <img src="${imageUrl}" style="border: 0px; height: 20px"/>        
        <button type="button" onclick="acsViewModel.openAuthWindow('${loginUrl}')">${name}</button>
	</script>
    
	<!-- Start page -->
	<div id="startPage" data-role="view" data-title="TODOs" data-layout="defaultView" data-model="startViewModel">
		<header data-role="header">
			<div data-role="navbar">
				<span data-role="view-title"></span>
			</div>
		</header>
        <img src="Images/Wooden_Todo_256x256.png" alt="TODOs" />
		<a data-role="button" id="openLoginButton" data-bind="click: openLoginView">Login</a>
        <footer data-role="footer">
			<div data-role="tabstrip">
				<a data-icon="home" href="#startPage">Home</a>
				<a data-icon="bookmarks" href="#todosPage">TODOs</a> 
                <a data-icon="settings" href="#settingsPage">Settings</a> 
				<a data-icon="info" href="#infoPage">Info</a>
			</div>
		</footer>
	</div>

    <!-- ACS Login page -->
    <div id="acsLogin" data-role="view" data-title="Login" data-model="acsViewModel" data-show="acsLoginShow">
		<header data-role="header">
			<div data-role="navbar">
				<span data-role="view-title"></span>
			</div>
		</header>		
		<br />
		<h2>Choose your Identity Provider</h2>
		<br />

        <ul id="idps" data-role="listview" data-bind="source: idpsSource" data-template="idpListTemplate" data-style="inset">
		</ul>

        <footer data-role="footer">
			<div data-role="tabstrip">
				<a data-icon="home" href="#startPage">Home</a>
				<a data-icon="bookmarks" href="#todosPage">TODOs</a>
                <a data-icon="settings" href="#settingsPage">Settings</a>
				<a data-icon="info" href="#infoPage">Info</a>
			</div>
		</footer>
	</div>

	<!-- TODOs page -->
	<div id="todosPage" data-role="view" data-title="TODOs" data-model="todosViewModel" data-init="todosPageInit" data-show="todosPageShow" data-before-show="beforePageShow">
		<header data-role="header">
			<div data-role="navbar">
				<span data-role="view-title"></span>
				<a data-align="right" data-role="button" class="nav-button" data-icon="add" data-bind="click: navigateAddTodo"></a>
				<a data-align="left" data-role="button" class="nav-button" data-icon="refresh" data-bind="click: loadTodos"></a>
			</div>
		</header>
		
		<br />
		<h2>Items</h2>
				
		<ul id="tasksList" data-role="listview" data-bind="source: todosSource" data-template="tasksListTemplate" data-style="inset">
		</ul>

		<footer data-role="footer">
			<div data-role="tabstrip">
				<a data-icon="home" href="#startPage">Home</a>
				<a data-icon="bookmarks" href="#todosPage">TODOs</a>
                <a data-icon="settings" href="#settingsPage">Settings</a>
				<a data-icon="info" href="#infoPage">Info</a>
			</div>
		</footer>
	</div>

	<!-- TODO details page -->
	<div id="todoDetailsPage" data-role="view" data-title="Details" data-model="todosViewModel" data-before-show="beforePageShow">
		<header data-role="header">
			<div data-role="navbar">
				<a data-role="backbutton" data-align="left">Back</a>
				<span data-role="view-title"></span>
			</div>
		</header>
        <br />
		<h2>Item Details</h2>

		<ul data-role="listview" data-style="inset">
			<li>
				<label for="tasktitle">Title:</label>
				<input type="text" id="tasktitle" data-bind="value: currentItem.title" />
			</li>
			<li>
				<label for="details">Details:</label>
				<input type="text" id="details" data-bind="value: currentItem.details" />
			</li>
			<li>
				<label for="done">Done:</label>
				<input id="done" data-role="switch" data-bind="checked: currentItem.done" />
			</li>
		</ul>

		<br />
		<a id="saveTodoButton" data-bind="click: updateTodo" data-role="button">Save</a>

        <footer data-role="footer">
			<div data-role="tabstrip">
				<a data-icon="home" href="#startPage">Home</a>
				<a data-icon="bookmarks" href="#todosPage">TODOs</a>
                <a data-icon="settings" href="#settingsPage">Settings</a>
				<a data-icon="info" href="#infoPage">Info</a>
			</div>
		</footer>
	</div>

	<!-- Add TODO page -->
	<div id="addTodoPage" data-role="view" data-title="TODOs" data-transition="overlay:up" data-model="newTodoItemViewModel" data-before-show="beforePageShow">
		<header data-role="header">
			<div data-role="navbar">
				<a data-role="backbutton" data-align="left">Back</a>
				<span data-role="view-title"></span>
			</div>
		</header>
        <br />
		<h2>New Item</h2>
		
		<ul data-role="listview" data-style="inset">
			<li>
				<label for="newtasktitle">Title:</label>
				<input data-bind="value: title" type="text" id="newtasktitle" />
			</li>
			<li>
				<label for="newtaskdetails">Details:</label>
				<input data-bind="value: details" type="text" id="newtaskdetails" />
			</li>
		</ul>

		<br />
		<a id="addTodoButton" data-bind="click: saveTodo" data-role="button">Save</a>
        <footer data-role="footer">
			<div data-role="tabstrip">
				<a data-icon="home" href="#startPage">Home</a>
				<a data-icon="bookmarks" href="#todosPage">TODOs</a>
                <a data-icon="settings" href="#settingsPage">Settings</a>
				<a data-icon="info" href="#infoPage">Info</a>
			</div>
		</footer>
	</div>

    <!-- Settings page -->
	<div id="settingsPage" data-role="view" data-title="TODOs" data-layout="defaultView" data-model="settingsViewModel">
		<header data-role="header">
			<div data-role="navbar">
				<span data-role="view-title"></span>
			</div>
		</header>
		<br />
		<h2>Settings</h2>
			
		<ul data-role="listview" data-style="inset">
			 <li>
                <select data-bind="value: authenticationMode">
                    <option value="Basic">Basic</option>
                    <option value="ACS">ACS</option>
                </select>
                Authentication
            </li>
		</ul>      				
		<footer data-role="footer">
			<div data-role="tabstrip">
				<a data-icon="home" href="#startPage">Home</a>
				<a data-icon="bookmarks" href="#todosPage">TODOs</a>
                <a data-icon="settings" href="#settingsPage">Settings</a>
				<a data-icon="info" href="#infoPage">Info</a>
			</div>
		</footer>
	</div>

	<!-- Info/About page -->
	<div id="infoPage" data-role="view" data-title="TODOs" data-layout="defaultView">
		<header data-role="header">
			<div data-role="navbar">
				<span data-role="view-title"></span>
			</div>
		</header>
		<br />
		<h2>About TODO Items</h2>
			
		<ul data-role="listview" data-style="inset">
			<li>
				Version 0.2 (2012-10-2.1)
				<img data-align="right" alt="TODOs" src="Images/Wooden_Todo_32x32.png" style="float: right"/>
			</li>
			<li>
				<a href="mailto:christian.weyer@thinktecture.com?Subject=Question about TODO Items app (2012-10-2.1)" data-rel="external">Christian Weyer</a>
				<a data-role="detailbutton" data-icon="compose"></a>
			</li>
		</ul>      				
		<footer data-role="footer">
			<div data-role="tabstrip">
				<a data-icon="home" href="#startPage">Home</a>
				<a data-icon="bookmarks" href="#todosPage">TODOs</a>
                <a data-icon="settings" href="#settingsPage">Settings</a>
				<a data-icon="info" href="#infoPage">Info</a>
			</div>
		</footer>
	</div>
	
	<!-- Global modal views/dialogs -->
	<!-- Login dialog -->
	<div data-role="modalview" id="loginDialog" style="width: 95%; height: 50%;" data-model="authenticationViewModel">
		<div data-role="header">
			<div data-role="navbar">
				<span data-role="view-title">User Login</span>
				<a data-bind="click: closeLoginDialog" data-role="button" data-align="right">Cancel</a>
			</div>
		</div>
		<ul data-role="listview" data-style="inset">
			<li>
				<label for="username">Username:</label>
				<input data-bind="value: userName" type="text" id="username" /></li>
			<li>
				<label for="password">Password:</label>
				<input data-bind="value: password" type="password" id="password" /></li>
		</ul>
		<a data-bind="click: doLogin" id="loginButton" data-role="button" data-align="right">Login</a>
	</div>

	<!-- Error dialog -->
	<div data-role="modalview" id="errorDialog" style="width: 85%; height: 50%;" data-model="errorViewModel">
		<div data-role="header">
			<div data-role="navbar">
				<span data-role="view-title">Error</span>
				<a data-bind="click: closeErrorDialog" data-role="button" data-align="right">X</a>
			</div>
		</div>
		<ul data-role="listview" id="errorText">
			<li><span data-bind="text: message">Error.</span></li>
		</ul>
		<p>
			<a data-role="button" type="button" id="commonErrorButton" data-bind="click: closeErrorDialog">OK</a>
		</p>
	</div>
</body>
</html>
